name: CI
on: push

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: ðŸ’™ Localazy CI Setup
        id: setup
        uses: ./ci-setup
        with:
          app-id: ${{ secrets.AUTH_APP_ID }}
          app-key: ${{ secrets.AUTH_APP_KEY }}

      - name: ðŸ’™ Localazy CI Version Management
        id: version-management
        uses: ./ci-version-management

      - name: ðŸ’™ Localazy CD Release
        uses: ./cd-release
        with:
          token: ${{ steps.setup.outputs.token }}
          package-version: ${{ steps.version-management.outputs.version }}
          changelog-pr: ${{ steps.version-management.outputs.changelog-pr }}
          changelog-github-release: ${{ steps.version-management.outputs.changelog-github-release }}
          next-action: ${{ steps.version-management.outputs.next-action }}
